<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>IGNORED</title>
    </h:head>
    <body data-spy="scroll" data-target=".subnav" data-offset="50" style="background-color: #DCDDDF">
        <ui:composition template="/Templates/mainTemplate.xhtml">
            <ui:define name="content">

                
                <div style="margin-top: 100px; margin-left: 50px">

                    <h:form>
                        <div class="span12">
                            <div class="hero-unit" style="background-color: #FFFFFF">
                                <h:inputText value="#{questionnaireBean.name}"/>
                            </div>
                        </div>
                        <div class="span5">
                            <div class="hero-unit" style="height: 500px; background-color: #FFFFFF">

                                <table>
                                    <tr>
                                        <!-- tekstfelt for å skrive inn spørsmål-->
                                        <td><h:inputTextarea value="#{questionBean.questiontext}" style="max-width: 300px; max-height: 300px"/></td> 
                                    </tr>
                                </table>
                                <!--Radioknapper for å velge type svar-->
                                <h:selectOneRadio value="#{questionBean.selected}" layout="lineDirection" styleClass="toggle-radio-buttons">
                                    <f:selectItem itemValue="0" itemLabel="Flervalg"/>
                                    <f:selectItem itemValue="1" itemLabel="Fleralternativ" />
                                    <f:selectItem itemValue="2" itemLabel="Ja/Nei" />
                                    <f:selectItem itemValue="3" itemLabel="Tekst" />
                                    <f:ajax event="change" render="qtype"/>
                                </h:selectOneRadio>
                                <h:panelGroup id="qtype">

                                    <!--Vises når flersvar er valgt-->
                                    <h:panelGroup rendered="#{questionBean.multipleChoiceQuestion}">
                                        <h:dataTable value="#{questionBean.answers}" var="a" id="ans" >
                                            <h:column>
                                                #{a.text}
                                            </h:column>
                                            <h:column>
                                                <h:commandLink value="-" action="#{questionBean.deleteAnswer(a)}"/>
                                            </h:column>
                                        </h:dataTable>
                                        <h:inputText size="10" value="#{questionBean.ans}"/>
                                        <h:commandLink value="+" action="#{questionBean.addAnswer()}"/>
                                    </h:panelGroup>
                                </h:panelGroup>
                                <br/>
                                <h:commandButton value="Legg til spørsmål" action="#{questionnaireBean.addQuestion(questionBean.newQuestion())}" />
                            </div>
                        </div>
                        <div class ="span7">
                            <table>
                                <h:dataTable value="#{questionnaireBean.questions}" var="q" styleClass="order-table"
                                             headerClass="order-table-header"
                                             rowClasses="order-table-odd-row,order-table-even-row">
                                    <h:column>
                                        <!--ja/nei-->
                                        <h:panelGroup rendered="#{q.questionInt==2}">
                                            <div class="alert alert-success span7">
                                                <h:commandButton value="x" action="#{questionnaireBean.deleteQuestion(q)}"/>
                                                <b>#{q.questionText}</b>
                                                <h:selectOneRadio value="#{q.answer}" disabled="true">
                                                    <f:selectItems value="#{q.options}"
                                                                   var="a"
                                                                   itemValue="#{a}"
                                                                   itemLabel="#{a.text}"/>
                                                </h:selectOneRadio></div>
                                        </h:panelGroup>
                                        <!--radioknapper-->
                                        <h:panelGroup rendered="#{q.questionInt==1}">
                                            <div class="alert alert-success span7"> 
                                                <h:commandButton value="x" action="#{questionnaireBean.deleteQuestion(q)}"/>
                                                <b>#{q.questionText}</b>
                                                <h:selectOneRadio value="#{q.answer}" disabled="true">
                                                    <f:selectItems value="#{q.options}"
                                                                   var="a"
                                                                   itemValue="#{a}"
                                                                   itemLabel="#{a.text}"/>
                                                </h:selectOneRadio></div>
                                        </h:panelGroup>
                                        <!--tekst-->
                                        <h:panelGroup rendered="#{q.questionInt==3}">
                                            <div class="alert alert-success span7">
                                                <h:commandButton value="x" action="#{questionnaireBean.deleteQuestion(q)}"/>
                                                <b>#{q.questionText}</b>
                                                <h:inputTextarea value="Her vil brukeren kunne svare" readonly="true"/></div>

                                        </h:panelGroup>
                                        <!--checkbox-->
                                        <h:panelGroup rendered="#{q.questionInt==0}">
                                            <div class="alert alert-success span7">
                                                <h:commandButton value="x" action="#{questionnaireBean.deleteQuestion(q)}"/>
                                                <b>#{q.questionText}</b>
                                                <h:selectManyCheckbox rendered="#{q.questionInt==0}" disabled="true">
                                                    <f:selectItems value="#{q.options}"
                                                                   var="a"
                                                                   itemValue="#{a}"
                                                                   itemLabel="#{a.text}"/>
                                                </h:selectManyCheckbox>
                                            </div>
                                        </h:panelGroup>
                                    </h:column>
                                    <h:commandButton value="Publiser"/>
                                </h:dataTable>
                            </table>
                            <div class="alert alert-success">
                                <h:commandButton value="Publiser" action="#{questionnaireBean.addQuestionnaire(questionnaireBean.newQuestionnaire())}"/>
                            </div>                            
                        </div>
                    </h:form>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>
<!--
CHECKBOX_QUESTION = 0;
RADIO_QUESTION = 1;
BOOLEAN_QUESTION = 2;                                         
TEXT_QUESTION = 3;


-->
