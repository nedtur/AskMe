<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>IGNORED</title>
    </h:head>
    <body data-spy="scroll" data-target=".subnav" data-offset="50" style="background-color: #ACDED6">
        <ui:composition template="/Templates/mainTemplate.xhtml">
            <ui:define name="content">

                <div style="margin-top: 100px; margin-left: 50px">
                    <h:form>
                        <div class="span5">
                            <div class="hero-unit" style="height: 500px">

                                <table>
                                    <tr>
                                        <!--tekstfelt for å skrive inn spørsmål-->
                                        <td><h:inputTextarea value="#{questionBean.questiontext}" style="max-width: 300px; max-height: 300px"/></td> 
                                    </tr>
                                </table>
                                <!--Radioknapper for å velge type svar-->
                                <h:selectOneRadio value="#{questionBean.selected}" layout="lineDirection" styleClass="toggle-radio-buttons">
                                    <f:selectItem itemValue="0" itemLabel="Flervalg"/>
                                    <f:selectItem itemValue="1" itemLabel="Fleralternativ" />
                                    <f:selectItem itemValue="2" itemLabel="Ja/Nei" />
                                    <f:selectItem itemValue="3" itemLabel="Tekst" />
                                    <f:ajax event="change" render="qtype"/>
                                </h:selectOneRadio>
                                <h:panelGroup id="qtype">
                                    <!--Vises når tekstsvar er valgt-->
                                    <h:inputTextarea readonly="true" value ="Her vil brukeren kunne svare" style="resize: none;" rendered="#{questionBean.textAnswer}"/>

                                    <!--Vises når flersvar er valgt-->
                                    <h:panelGroup rendered="#{questionBean.multipleChoiceQuestion}">
                                        <h:dataTable value="#{questionBean.answers}" var="a" id="ans" >
                                            <h:column>
                                                #{a.text}
                                            </h:column>
                                            <h:column>
                                                <h:commandLink value="-" action="#{questionBean.deleteAnswer(a)}"/>
                                            </h:column>
                                        </h:dataTable>
                                        <h:inputText size="10" value="#{questionBean.ans}"/>
                                        <h:commandLink value="+" action="#{questionBean.addAnswer()}"/>
                                    </h:panelGroup>
                                </h:panelGroup>
                                <br/>
                                <h:commandButton value="Add" action="#{questionnaireBean.addQuestion(questionBean.newQuestion())}" />

                            </div>
                        </div>

                        <div class="span7">
                            <div class="hero-unit pull-right" style="width: 560px; height: 500px">
                                <table>
                                    <h:dataTable rules ="rows" frame="border" value="#{questionnaireBean.questions}" var="q"
                                                 styleClass="order-table"
                                                 headerClass="order-table-header"
                                                 rowClasses="order-table-odd-row,order-table-even-row">
                                        <h:column>
                                            <f:facet name="header">Spørsmål</f:facet>
                                            #{q.questionText}
                                        </h:column>

                                        <h:column>
                                            <f:facet name="header">Svar</f:facet>
                                            <h:dataTable value="#{q.options}" var="an"
                                                         styleClass="order-table"
                                                         headerClass="order-table-header"
                                                         rowClasses="order-table-odd-row,order-table-even-row">
                                                <h:column>
                                                    #{an.text} 
                                                </h:column>
                                            </h:dataTable>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">Spørsmåltype</f:facet>
                                            <h:column>
                                                #{q.questionType}
                                            </h:column>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header"></f:facet>
                                            <h:commandLink value="Delete" action="#{questionnaireBean.deleteQuestion(q)}" />
                                        </h:column>
                                    </h:dataTable>
                                    <h:commandLink value="Publiser" action="#{questionnaireBean.addQuestionnaire}"/>
                                    
                                    <h:dataTable value="#{questionnaireBean.questionnaires}" var="mm">
                                        <h:column>
                                            #{mm.name}
                                        </h:column>
                                        <h:column>
                                            <h:link value="#{mm.name}" outcome="answer">
                                                <f:param name="name" value="#{mm.name}" />
                                            </h:link>
                                        </h:column>
                                    </h:dataTable>
                                </table>
                            </div>
                        </div>
                    </h:form>
                </div>

            </ui:define>
        </ui:composition>
    </body>
</html>
